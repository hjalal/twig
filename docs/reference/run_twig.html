<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Run a twig model — run_twig • twig</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Run a twig model — run_twig"><meta property="og:description" content="This function runs a twig model, which can be either a decision tree or a Markov model."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">twig</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/decision_tree.html">Decision Tree Herpes Virus Encephalopathy</a>
    </li>
    <li>
      <a href="../articles/markov_time_dep.html">A Tutorial for Time Dependent Markov Model</a>
    </li>
  </ul></li>
<li>
  <a href="https://www.dashlab.ca/projects/decision_twig/" class="external-link">DecisionTwig</a>
</li>
<li>
  <a href="https://github.com/hjalal/twig" class="external-link">GitHub</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hjalal/twig" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run a twig model</h1>
    
    <div class="hidden name"><code>run_twig.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function runs a twig model, which can be either a decision tree or a Markov model.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_twig</span><span class="op">(</span></span>
<span>  <span class="va">twig_obj</span>,</span>
<span>  <span class="va">params</span>,</span>
<span>  n_cycles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  offset_trace_cycle <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  ncore <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  progress_bar <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>twig_obj</dt>
<dd><p>A twig object created by the <code>twig</code> function.</p></dd>


<dt>params</dt>
<dd><p>A data frame or list of parameters to be used in the model.</p></dd>


<dt>n_cycles</dt>
<dd><p>An integer specifying the number of cycles for a Markov model. Default is NULL.</p></dd>


<dt>verbose</dt>
<dd><p>A logical value indicating whether to print detailed output. Default is FALSE.</p></dd>


<dt>parallel</dt>
<dd><p>A logical value indicating whether to run the model in parallel. Default is FALSE.</p></dd>


<dt>offset_trace_cycle</dt>
<dd><p>An integer specifying the offset trace cycle. Default is 1.
This is used to adjust the cycle number in the trace output. If set to 0, the initial state distribution will be used
as the first cycle. If set to 1, the initial state distribution will be ignored in the Markov trace.
In both situations, the total number of cycles will be the same as the input n_cycles.</p></dd>


<dt>ncore</dt>
<dd><p>An integer specifying the number of cores to use for parallel processing. Default is total number of cores - 1.</p></dd>


<dt>progress_bar</dt>
<dd><p>A logical value indicating whether to display a progress bar. Default is TRUE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list containing the results of the model run. The list includes the following elements:</p><ul><li><p>Rewards_summary An array containing the summary statistics of the rewards if params is a data.frame with more than 1 row.</p></li>
<li><p>Rewards_sim An array containing the simulated rewards by simulation.</p></li>
</ul><p>The following will be included if verbose is TRUE and the twig object is a Markov model:</p><ul><li><p>sim The simulation ID.</p></li>
<li><p>Rewards_sim A matrix of simulated rewards of size decision x rewards.</p></li>
<li><p>Rewards_array An array containing the rewards for each cycle, state, decision, and reward.</p></li>
<li><p>Rewards_array_cycle: An array containing the rewards for each cycle, state, decision, and reward, adjusted for the cycle.</p></li>
<li><p>Trace_array: An array containing the Markov trace for each cycle, state, and decision.</p></li>
<li><p>TransitionProb_array: An array containing the transition probabilities for each state, destination state, cycle, and decision.</p></li>
<li><p>Paths: A data frame containing the path probabilities for each state, cycle, and decision.</p></li>
<li><p>Event_options: A data frame containing the event options for each state, cycle, and decision.</p></li>
<li><p>Function_Values: A data frame containing the evaluated function values for each state, cycle, decision, and event.</p></li>
<li><p>evaluated_funs: A list of evaluated functions. Each function returns a data frame enumerating the dependencies of the function along with the value returned by that function for each combination of values.</p></li>
<li><p>path_events: A data frame of the event options along each path. Rows = paths, columns = events.</p></li>
</ul><p>The following will be included if verbose is TRUE and the twig object is a decision tree:</p><ul><li><p>sim: The simulation ID.</p></li>
<li><p>Rewards_sim: A matrix of simulated rewards of size decision x rewards.</p></li>
<li><p>path_events: A data frame of the event options along each path. Rows = paths, columns = events.</p></li>
<li><p>Event_options: A data frame containing the probability of event options by decision.</p></li>
<li><p>evaluated_funs: A list of evaluated functions. Each function returns a data frame enumerating the dependencies of the function along with the value returned by that function for each combination of values.</p></li>
<li><p>Prob_Function_Values: A data frame of the probability function values evaluated by decision and events harmonized to the same combinations of decisions and events across all probability functions.</p></li>
<li><p>Paths: An array containing the path probabilities of size decision x paths.</p></li>
<li><p>Path_rewards: An array containing the path rewards of size decision x paths x rewards. Paths are indexed by their final outcomes in the twig and a key to event options is provided in path_events.</p></li>
<li><p>Path_rewards_weighted: An array containing the path rewards weighted by the probability of each path. This is also of size decision x paths x rewards. Paths are indexed by their final outcomes in the twig and a key to event options is provided in path_events.</p></li>
<li><p>Outcomes: A matrix of final outcome probabilities. Final outcomes are the terminal event transitions of size decision x outcomes.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="https://hjalal.github.io/twig/articles/markov_time_dep.html" class="external-link">Markov model vignette</a>, and
<a href="https://hjalal.github.io/twig/articles/decision_tree.html" class="external-link">Decision tree vignette</a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">run_twig</span><span class="op">(</span><span class="va">mytwig</span>, <span class="va">params</span>, n_cycles <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># see the vignettes for more examples</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.dashlab.ca" class="external-link">Hawre Jalal</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

